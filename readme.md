# 基于FFmpeg的Android视频播放器

基于FFmpeg6.0。支持Android的NdkMediaCodec，不比走jni调用。支持av1_mediacodec硬解。

软解支持aom、fdk-aac、mp3lame、x264、x265。相应第三方库的Android构建都有对应的仓库。

代码支持结构支持多平台，平台相关解码器定义在`platform.h`。音视频输入输出接口位于`Factory`中。

## 更新日志

**2024.7.23**

1. 修复退出播放器时阻塞的问题。
2. 修复了内存泄漏。
3. 修复单独播放音频或视频时占用内存过大的问题。
4. 修复了播放完毕后崩溃的问题。
5. 优化了播放状态回调。
6. 修复了解码器在第二次打开之后不正常的问题。
7. 修复了seek时卡顿的问题。
8. 修复了仅有视频轨时播放速度不正常的问题。


**2024.8.7**

1. 修复了文件播放完毕后的状态异常问题。
2. 新增了HandlerThread方便运行异步任务。
3. 修改GL的渲染逻辑，对于YUV420P、NV21和NV12这几种常见格式，将直接送入着色器而不需要预处理。提升性能表现。
4. 升级到OpenGL ES 3.1，可以支持计算着色器以应对可能出现的更复杂的格式。
5. 修复某些文件在metadata里指定旋转方向不生效的问题。
